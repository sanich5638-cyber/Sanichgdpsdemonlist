<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sanich GDPS Demon List</title>
    <!-- –ü–û–î–ö–õ–Æ–ß–ï–ù–ò–ï CSS -->
    <link rel="stylesheet" href="css/main.css">
    <!-- VUE.JS -->
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
</head>
<body>
    <div id="app">
        <div class="container">
            <!-- –®–ê–ü–ö–ê -->
            <div class="header">
                <h1 class="main-title">Sanich GDPS Demon List</h1>
                <div class="stats">
                    <span class="demon-count">–í—Å–µ–≥–æ: {{ stats.total }}</span>
                    <span class="stat-verified">‚úì {{ stats.verified }}</span>
                    <span class="stat-pending">‚è≥ {{ stats.inVerification }}</span>
                    <span v-if="stats.platformers > 0" class="stat-platformers">üéÆ {{ stats.platformers }}</span>
                </div>
            </div>

            <!-- –ü–û–ò–°–ö –ò –°–û–†–¢–ò–†–û–í–ö–ê -->
            <div class="controls">
                <input type="text" v-model="searchQuery" placeholder="–ü–æ–∏—Å–∫ –¥–µ–º–æ–Ω–æ–≤..." class="search-input">
                <select v-model="sortBy" class="sort-select">
                    <option value="position">–ü–æ –ø–æ–∑–∏—Ü–∏–∏</option>
                    <option value="name">–ü–æ –Ω–∞–∑–≤–∞–Ω–∏—é</option>
                    <option value="difficulty">–ü–æ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏</option>
                </select>
            </div>

            <!-- –°–ü–ò–°–û–ö –î–ï–ú–û–ù–û–í -->
            <div class="demon-list">
                <div class="demon-item" 
                     v-for="demon in processedDemons" 
                     :key="demon.id"
                     @click="selectDemon(demon)">
                    
                    <div class="demon-position">#{{ demon.position }} - {{ demon.name }}</div>
                    <div class="demon-author">published by {{ demon.author }}</div>
                    <div class="demon-progress">{{ getDemonProgress(demon) }} points</div>
                </div>
            </div>
        </div>

        <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –í –°–¢–ò–õ–ï POINTERCRATE -->
        <div class="modal-overlay" v-if="selectedDemon" @click="closeModal">
            <div class="modal-content" @click.stop>
                <button class="close-btn" @click="closeModal">√ó</button>
                
                <div class="modal-header">
                    <h1 class="modal-title">{{ selectedDemon.name }}</h1>
                    <div class="modal-subtitle">published by {{ selectedDemon.author }}</div>
                </div>

                <div class="modal-body">
                    <!-- –û–°–ù–û–í–ù–ê–Ø –ò–ù–§–û–†–ú–ê–¶–ò–Ø -->
                    <div class="info-section">
                        <h2 class="section-title">Level Information</h2>
                        <div class="info-grid">
                            <div class="info-item">
                                <div class="info-label">Level Password</div>
                                <div class="info-value">{{ selectedDemon.password }}</div>
                            </div>
                            <div class="info-item">
                                <div class="info-label">Level ID</div>
                                <div class="info-value">{{ selectedDemon.id }}</div>
                            </div>
                            <div class="info-item">
                                <div class="info-label">Verifier</div>
                                <div class="info-value">{{ selectedDemon.verifier || 'Not verified' }}</div>
                            </div>
                            <div class="info-item">
                                <div class="info-label">Creators</div>
                                <div class="info-value">{{ selectedDemon.creators.join(', ') }}</div>
                            </div>
                            <div class="info-item">
                                <div class="info-label">Qualify %</div>
                                <div class="info-value">{{ selectedDemon.percentToQualify }}%</div>
                            </div>
                            <div class="info-item">
                                <div class="info-label">Status</div>
                                <div class="info-value">
                                    <span :class="['status-badge', getStatusClass(selectedDemon)]">
                                        {{ getStatusText(selectedDemon) }}
                                    </span>
                                </div>
                            </div>
                            <!-- VERIFICATION –ü–û–õ–ï -->
                            <div class="info-item">
                                <div class="info-label">Verification</div>
                                <div class="info-value">
                                    <a v-if="selectedDemon.verification && selectedDemon.verification !== '' && selectedDemon.verification !== 'No data'" 
                                       :href="selectedDemon.verification" 
                                       target="_blank" 
                                       class="record-link">
                                        Watch Video
                                    </a>
                                    <span v-else style="color: #888">No verification</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- DEMONLIST SCORES -->
                    <div class="info-section">
                        <h2 class="section-title">Demonlist Scores</h2>
                        <div class="info-grid">
                            <div class="info-item">
                                <div class="info-label">Score (100%)</div>
                                <div class="info-value">{{ calculateScore(selectedDemon, 100) }}</div>
                            </div>
                            <div class="info-item">
                                <div class="info-label">Score ({{ selectedDemon.percentToQualify }}%)</div>
                                <div class="info-value">{{ calculateScore(selectedDemon, selectedDemon.percentToQualify) }}</div>
                            </div>
                        </div>
                    </div>

                    <!-- RECORDS -->
                    <div class="info-section">
                        <h2 class="section-title">
                            Records 
                            <span style="color: #888; font-size: 0.8em; font-weight: normal;">
                                ({{ selectedDemon.records ? selectedDemon.records.length : 0 }} records registered)
                            </span>
                        </h2>
                        
                        <div v-if="selectedDemon.records && selectedDemon.records.length > 0">
                            <table class="records-table">
                                <thead>
                                    <tr>
                                        <th>Player</th>
                                        <th>Progress</th>
                                        <th>Video</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr v-for="(record, index) in selectedDemon.records" :key="index">
                                        <td class="record-user">{{ record.user }}</td>
                                        <td class="record-progress">
                                            {{ getRecordDisplay(record, selectedDemon.levelType) }}
                                            <span v-if="record.comment" style="color: #888; font-size: 0.8em;">
                                                - {{ record.comment }}
                                            </span>
                                        </td>
                                        <td>
                                            <a v-if="record.link" :href="record.link" target="_blank" class="record-link">Watch</a>
                                            <span v-else style="color: #888">No video</span>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <div v-else style="color: #888; text-align: center; padding: 20px;">
                            No records yet
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- –ü–û–î–ö–õ–Æ–ß–ï–ù–ò–ï JavaScript -->
    <script src="js/main.js"></script>
</body>
</html>
